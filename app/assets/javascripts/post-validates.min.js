// function checkPrice(){var t,e,r;if(r=$("#post_price").val(),e=$("#post_area").val(),t=$("#post_unit :selected").text(),r>0)if(e>0)switch(t){case"Triệu":$("#totalPrice").text(r+" triệu").css({color:"red"});break;case"Tỷ":$("#totalPrice").text(r+" tỷ").css({color:"red"});break;case"Trăm nghìn/m2":$("#totalPrice").text(r*e*100+" nghìn").css({color:"red"});break;case"Triệu/m2":$("#totalPrice").text(r*e+" triệu").css({color:"red"});break;default:$("#totalPrice").text("Thỏa Thuận.").css({color:"red"})}else switch(t){case"Triệu":$("#totalPrice").text(r+" triệu").css({color:"red"});break;case"Tỷ":$("#totalPrice").text(r+" tỷ").css({color:"red"});break;case"Trăm nghìn/m2":case"Triệu/m2":$("#totalPrice").text("Thỏa Thuận").css({color:"red"});break;default:$("#totalPrice").text("Vui lòng chọn đơn vị.").css({color:"red"})}else $("#totalPrice").text("Thoả Thuận.").css({color:"red"})}function getCategoriesList(){var t=$("#cate_id").val();$("#cate_detail_id").html("<option>--Phân Mục--</option>"),$.post("/getcate.json",{category_id:t},function(t,e){t.forEach(function(t){$("#cate_detail_id").append("<option value="+t.id+">"+t.name+"</option>")})})}document.addEventListener("turbolinks:load",function(t){$("#from-create-post").submit(function(){$("#title_error").text("").css({color:"red"}),$("#category_error").text("").css({color:"red"}),$("#subcategory_error").text("").css({color:"red"}),$("#city_error").text("").css({color:"red"}),$("#district_error").text("").css({color:"red"}),$("#project_error").text("").css({color:"red"}),$("#area_error").text("").css({color:"red"}),$("#price_error").text("").css({color:"red"}),$("#address_error").text("").css({color:"red"}),$("#desciption_error").text("").css({color:"red"}),$("#front_error").text("").css({color:"red"}),$("#entrance_error").text("").css({color:"red"}),$("#floor_error").text("").css({color:"red"}),$("#bedroom_error").text("").css({color:"red"}),$("#toilet_error").text("").css({color:"red"}),$("#furniture_error").text("").css({color:"red"}),$("#contact_name_error").text("").css({color:"red"}),$("#contact_address_error").text("").css({color:"red"}),$("#contact_phone_error").text("").css({color:"red"}),$("#contact_mobile_error").text("").css({color:"red"}),$("#contact_mail_error").text("").css({color:"red"}),$("#notice_error").text("").css({color:"red"});var t=$.trim($("#post_title").val()),e=$("#cate_id :selected").text(),r=$("#cate_detail_id :selected").text(),i=$("#city_details :selected").text(),o=$("#district_details :selected").text(),a=$.trim($("#post_project").val()),n=$.trim($("#post_area").val()),s=$.trim($("#post_price").val()),c=$.trim($("#post_address_number").val()),d=$.trim($("#post_description").val()),_=$.trim($("#post_front").val()),l=$.trim($("#post_entrance").val()),p=$.trim($("#post_floor").val()),h=$.trim($("#post_bedroom").val()),g=$.trim($("#post_toilet").val()),m=$.trim($("#post_furniture").val()),u=$.trim($("#post_contact_name").val()),x=$.trim($("#post_contact_address").val()),f=$.trim($("#post_contact_phone").val()),v=$.trim($("#post_contact_mobile").val()),b=$.trim($("#post_contact_mail").val()),k=/[A-Z]?[- a-zA-Z]( [a-zA-Z])*$/,w=/^[0-9,\+-]+$/,y=/^0[0-9]{9,10}$/,P=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/,T=!0;return""==t?($("#title_error").text("Tiêu đề không thể bỏ trống."),T=!1):t.length<30?($("#title_error").text("Tiêu đề có tối thiểu 30 ký tự."),T=!1):t.length>99?($("#title_error").text("Tiêu đề có tối đa 99 ký tự."),T=!1):$("#title_error").text(""),"-- Hình Thức --"==e?($("#category_error").text("Vui lòng chọn hình thức"),T=!1):$("#category_error").text(""),"--Phân Mục--"==r?($("#subcategory_error").text("Vui lòng chọn loại"),T=!1):$("#subcategory_error").text(""),"-- Tỉnh/Thành Phố --"==i?($("#city_error").text("Vui lòng chọn tỉnh/thành phố"),T=!1):$("#city_error").text(""),"--Quận Huyện--"==o?($("#district_error").text("Vui lòng chọn quận huyện"),T=!1):$("#district_error").text(""),a.length>200?($("#project_error").text("Dự án có độ dài tối đa 200 ký tự."),T=!1):a.match(k)||""==a?$("#project_error").text(""):($("#project_error").text("Tên dự án không hợp lệ."),T=!1),n.length>6?($("#area_error").text("Diện tích tối đa 999999"),T=!1):!$.isNumeric(n)&&""!=n||n<=0&&""!=n?($("#area_error").text("Diện tích không hợp lệ."),T=!1):$("#area_error").text(""),s.length>6?($("#price_error").text("Giá tối đa 999999"),T=!1):!$.isNumeric(s)&&""!=s||s<=0&&""!=s?($("#price_error").text("Giá không hợp lệ."),T=!1):$("#price_error").text(""),""==c?($("#address_error").text("Địa chỉ không thể bỏ trống."),T=!1):c.length>200?($("#address_error").text("Địa chỉ phải có độ dài tối đa 200 ký tự."),T=!1):$("#address_error").text(""),""==d?($("#desciption_error").text("Mô tả không thể bỏ trống."),T=!1):d.length>3e3?($("#desciption_error").text("Mô tả có độ dài tối đa 3000 ký tự."),T=!1):d.length<30?($("#desciption_error").text("Mô tả phải có độ dài tối thiểu 30 ký tự."),T=!1):$("#desciption_error").text(""),!$.isNumeric(_)&&""!=_||_<=0&&""!=_?($("#front_error").text("Mặt tiền không hợp lệ."),T=!1):_.length>6?($("#front_error").text("Mặt tiền tối đa 999999m"),T=!1):$("#front_error").text(""),!$.isNumeric(l)&&""!=l||l<=0&&""!=l?($("#entrance_error").text("Đường vào không hợp lệ."),T=!1):l.length>6?($("#entrance_error").text("Đường vào tối đa 999999m"),T=!1):$("#entrance_error").text(""),!p.match(w)&&""!=p||p<=0&&""!=p?($("#floor_error").text("Số tầng không hợp lệ."),T=!1):p.length>3?($("#floor_error").text("Số tầng tối đa 999 tầng."),T=!1):$("#floor_error").text(""),!h.match(w)&&""!=h||""!=h&&h<=0?($("#bedroom_error").text("Số phòng ngủ không hợp lệ."),T=!1):h.length>3?($("#bedroom_error").text("Số phòng ngủ tối đa 999 phòng."),T=!1):$("#bedroom_error").text(""),!g.match(w)&&""!=g||""!=g&&g<=0?($("#toilet_error").text("Số toilet không hợp lệ."),T=!1):g.length>3?($("#toilet_error").text("Số toilet tối đa 999 phòng."),T=!1):$("#toilet_error").text(""),m.length>200?($("#furniture_error").text("Mô tả nội thất có độ dài tối đa 200 ký tự."),T=!1):$("#furniture_error").text(""),u.length>200?($("#contact_name_error").text("Tên có độ dài tối đa 200 ký tự."),T=!1):$("#contact_name_error").text(""),x.length>200?($("#contact_address_error").text("Địa chỉ liên hệ có độ dài tối đa 200 ký tự."),T=!1):$("#contact_address_error").text(""),f.match(y)||""==f?$("#contact_phone_error").text(""):($("#contact_phone_error").text("Số điện thoại không hợp lệ."),T=!1),""==v?($("#contact_mobile_error").text("Di động không thể bỏ trống."),T=!1):v.match(y)?$("#contact_mobile_error").text(""):($("#contact_mobile_error").text("Di động không hợp lệ."),T=!1),b.match(P)||""==b?b.length>100?($("#contact_mail_error").text("Mail liên hệ có độ dài tối đa 100 ký tự."),T=!1):$("#contact_mail_error").text(""):($("#contact_mail_error").text("Địa chỉ email không hợp lệ."),T=!1),T||$("#notice_error").text("Vui lòng kiểm tra lại thông tin đã nhập.").css({color:"red"}),T}),$(function t(){$("#totalPrice").text("Thỏa Thuận").css({color:"red"}),checkPrice(),$("#post_price").focusout(function(){checkPrice()}),$("#post_area").focusout(function(){checkPrice()}),$("#post_unit").change(function(){checkPrice()})}),$(function t(){$("#cate_id").change(function(){getCategoriesList()}),$("#city_details").change(function(){getCitiesList()}),$("#district_details").change(function(){getDistrictsList()}),$("#ward_details").change(function(){getWardsList()}),$("#street_details").change(function(){getStreetsList()})})});var str_addr=[3];function getCitiesList(){var t=$("#city_details").val();$("#district_details").html("<option>--Quận Huyện--</option>"),t>0?(str_addr[3]=$("#city_details :selected").text(),$("#post_address_number").val(str_addr[3]),$("#post_address_number").trigger("input"),$.post("/getdata.json",{city_id:t},function(t,e){var r;t[1].forEach(function(t){$("#district_details").append("<option value="+t.id+">"+t.name+"</option>")})})):($("select#district_details").prop("selectedIndex",0),$("#district_details").html("<option>--Quận Huyện--</option>"),$("select#ward_details").prop("selectedIndex",0),$("#ward_details").html("<option>-- Phường/Xã  --</option>"),$("select#street_details").prop("selectedIndex",0),$("#street_details").html("<option>-- Đường Phố --</option>"),$("#post_address_number").val(""))}function getDistrictsList(){var t=$("#district_details").val();$("#ward_details").html("<option>-- Phường/Xã  --</option>"),t>0?(str_addr[3]=$("#city_details :selected").text(),str_addr[2]=$("#district_details :selected").text(),$("#post_address_number").val(str_addr[2]+", "+str_addr[3]),$("#post_address_number").trigger("input"),$.post("/getdata.json",{district_id:t},function(t,e){t.forEach(function(t){$("#ward_details").append("<option value="+t.id+">"+t.name+"</option>")})})):($("select#ward_details").prop("selectedIndex",0),$("#ward_details").html("<option>-- Phường/Xã  --</option>"),$("select#street_details").prop("selectedIndex",0),$("#street_details").html("<option>-- Đường Phố --</option>"),$("#post_address_number").val(""))}function getWardsList(){var t=$("#ward_details").val();$("#street_details").html("<option>-- Đường Phố --</option>"),t>0?(str_addr[3]=$("#city_details :selected").text(),str_addr[2]=$("#district_details :selected").text(),str_addr[1]=$("#ward_details :selected").text(),$("#post_address_number").val(str_addr[1]+", "+str_addr[2]+", "+str_addr[3]),$("#post_address_number").trigger("input"),$.post("/getdata.json",{ward_id:t},function(t,e){t.forEach(function(t){$("#street_details").append("<option value="+t.id+">"+t.name+"</option>")})})):($("select#street_details").prop("selectedIndex",0),$("#street_details").html("<option>-- Đường Phố --</option>"),$("#post_address_number").val(""))}function getStreetsList(){var t;$("#street_details").val()>0?(str_addr[3]=$("#city_details :selected").text(),str_addr[2]=$("#district_details :selected").text(),str_addr[1]=$("#ward_details :selected").text(),str_addr[0]=$("#street_details :selected").text(),$("#post_address_number").val(str_addr[0]+", "+str_addr[1]+", "+str_addr[2]+", "+str_addr[3]),$("#post_address_number").trigger("input")):$("#post_address_number").val("")}var new_image_feild='<div class="file_field"><button class="btn btn-info btn-image"><i class="fa fa-plus-circle fa-3x"></i><br>Add Image</button><input name="images[url][]" class="image-input" onchange="preview_image(event)" type="file" id="post_images_attributes_0_url"><div class="image-output"><div class="btn btn-danger image-remove" onclick="remove_image(event)"><i class="fa fa-trash"></i></div></div></div>',delete_image_feild='<input type="hidden" value="7" name="image_delete[][id]"">',is_max_image_num=!1;function append_new_image_input(){$("#file_field_container").children(".file_field").length<8?$("#file_field_container").append(new_image_feild):is_max_image_num=!0}function preview_image(t){var e=new FileReader;e.onload=function(){var r=$(t.target).next();r.css("backgroundImage","url("+e.result+")"),r.css("display","block"),append_new_image_input()},e.readAsDataURL(t.target.files[0])}function remove_image(t){var e;$(t.target).parents(".file_field").remove(),is_max_image_num&&(append_new_image_input(),is_max_image_num=!1)}function remove_image(t,e){var r=$(t.target).parents(".file_field");$("#file_field_container").append('<input type="hidden" value='+e+' name="images_delete[][id]"">'),r.remove(),is_max_image_num&&(append_new_image_input(),is_max_image_num=!1)}