function checkPrice(){var t,e,r;if(r=$("#post_price").val(),e=$("#post_area").val(),t=$("#post_unit :selected").text(),r>0)if(e>0)switch(t){case"Triệu":$("#totalPrice").text(r+" "+I18n.t("million")).css({color:"red"});break;case"Tỷ":$("#totalPrice").text(r+" "+I18n.t("billion")).css({color:"red"});break;case"Trăm nghìn/m2":$("#totalPrice").text(r*e*100+" "+I18n.t("hunderm2")).css({color:"red"});break;case"Triệu/m2":$("#totalPrice").text(r*e+" "+I18n.t("millionm2")).css({color:"red"});break;default:$("#totalPrice").text(I18n.t("agreement")).css({color:"red"})}else switch(t){case"Triệu":$("#totalPrice").text(r+" "+I18n.t("million")).css({color:"red"});break;case"Tỷ":$("#totalPrice").text(r+" "+I18n.t("billion")).css({color:"red"});break;case"Trăm nghìn/m2":case"Triệu/m2":$("#totalPrice").text(I18n.t("agreement")).css({color:"red"});break;default:$("#totalPrice").text(I18n.t("js.post.error.unit.blank")).css({color:"red"})}else $("#totalPrice").text(I18n.t("agreement")).css({color:"red"})}function getCategoriesList(){var t=$("#cate_id").val();$("#cate_detail_id").html("<option>--Phân Mục--</option>"),$.post("/getcate.json",{category_id:t},function(t,e){t.forEach(function(t){$("#cate_detail_id").append("<option value="+t.id+">"+t.name+"</option>")})})}document.addEventListener("turbolinks:load",function(t){$("#from-create-post").submit(function(){$("#title_error").text("").css({color:"red"}),$("#category_error").text("").css({color:"red"}),$("#subcategory_error").text("").css({color:"red"}),$("#city_error").text("").css({color:"red"}),$("#district_error").text("").css({color:"red"}),$("#project_error").text("").css({color:"red"}),$("#area_error").text("").css({color:"red"}),$("#price_error").text("").css({color:"red"}),$("#address_error").text("").css({color:"red"}),$("#desciption_error").text("").css({color:"red"}),$("#front_error").text("").css({color:"red"}),$("#entrance_error").text("").css({color:"red"}),$("#floor_error").text("").css({color:"red"}),$("#bedroom_error").text("").css({color:"red"}),$("#toilet_error").text("").css({color:"red"}),$("#furniture_error").text("").css({color:"red"}),$("#contact_name_error").text("").css({color:"red"}),$("#contact_address_error").text("").css({color:"red"}),$("#contact_phone_error").text("").css({color:"red"}),$("#contact_mobile_error").text("").css({color:"red"}),$("#contact_mail_error").text("").css({color:"red"}),$("#notice_error").text("").css({color:"red"});var t=$.trim($("#post_title").val()),e=$("#cate_id :selected").text(),r=$("#cate_detail_id :selected").text(),o=$("#city_details :selected").text(),s=$("#district_details :selected").text(),a=$.trim($("#post_project").val()),i=$.trim($("#post_area").val()),n=$.trim($("#post_price").val()),c=$.trim($("#post_address_number").val()),_=$.trim($("#post_description").val()),d=$.trim($("#post_front").val()),l=$.trim($("#post_entrance").val()),p=$.trim($("#post_floor").val()),m=$.trim($("#post_bedroom").val()),u=$.trim($("#post_toilet").val()),x=$.trim($("#post_furniture").val()),g=$.trim($("#post_contact_name").val()),f=$.trim($("#post_contact_address").val()),h=$.trim($("#post_contact_phone").val()),v=$.trim($("#post_contact_mobile").val()),b=$.trim($("#post_contact_mail").val()),I=/[A-Z]?[- a-zA-Z]( [a-zA-Z])*$/,j=/^[0-9,\+-]+$/,w=/^0[0-9]{9,10}$/,y=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/,P=!0;return""==t?($("#title_error").text(I18n.t("js.post.error.title.blank")),P=!1):t.length<30?($("#title_error").text(I18n.t("js.post.error.title.too_short")),P=!1):t.length>99?($("#title_error").text(I18n.t("js.post.error.title.too_long")),P=!1):$("#title_error").text(""),"-- Hình Thức --"==e?($("#category_error").text(I18n.t("js.post.error.category.blank")),P=!1):$("#category_error").text(""),"--Phân Mục--"==r?($("#subcategory_error").text(I18n.t("js.post.error.sub_category.blank")),P=!1):$("#subcategory_error").text(""),"-- Tỉnh/Thành Phố --"==o?($("#city_error").text(I18n.t("js.post.error.city.blank")),P=!1):$("#city_error").text(""),"--Quận Huyện--"==s?($("#district_error").text(I18n.t("js.post.error.district.blank")),P=!1):$("#district_error").text(""),a.length>200?($("#project_error").text(I18n.t("js.post.error.project.too_long")),P=!1):a.match(I)||""==a?$("#project_error").text(""):($("#project_error").text(I18n.t("js.post.error.project.invalid")),P=!1),i.length>6?($("#area_error").text(I18n.t("js.post.error.area.max_value")),P=!1):!$.isNumeric(i)&&""!=i||i<=0&&""!=i?($("#area_error").text(I18n.t("js.post.error.area.not_a_number")),P=!1):$("#area_error").text(""),n.length>6?($("#price_error").text(I18n.t("js.post.error.price.max_value")),P=!1):!$.isNumeric(n)&&""!=n||n<=0&&""!=n?($("#price_error").text(I18n.t("js.post.error.price.not_a_number")),P=!1):$("#price_error").text(""),""==c?($("#address_error").text(I18n.t("js.post.error.address.blank")),P=!1):c.length>200?($("#address_error").text(I18n.t("js.post.error.address.too_long")),P=!1):$("#address_error").text(""),""==_?($("#desciption_error").text(I18n.t("js.post.error.description.blank")),P=!1):_.length>3e3?($("#desciption_error").text(I18n.t("js.post.error.description.too_long")),P=!1):_.length<30?($("#desciption_error").text(I18n.t("js.post.error.description.too_short")),P=!1):$("#desciption_error").text(""),!$.isNumeric(d)&&""!=d||d<=0&&""!=d?($("#front_error").text(I18n.t("js.post.error.front.not_a_number")),P=!1):d.length>6?($("#front_error").text(I18n.t("js.post.error.front.max_value")),P=!1):$("#front_error").text(""),!$.isNumeric(l)&&""!=l||l<=0&&""!=l?($("#entrance_error").text(I18n.t("js.post.error.front.not_a_number")),P=!1):l.length>6?($("#entrance_error").text(I18n.t("js.post.error.entrance.max_value")),P=!1):$("#entrance_error").text(""),!p.match(j)&&""!=p||p<=0&&""!=p?($("#floor_error").text(I18n.t("js.post.error.entrance.not_a_number")),P=!1):p.length>3?($("#floor_error").text(I18n.t("js.post.error.floow.max_value")),P=!1):$("#floor_error").text(""),!m.match(j)&&""!=m||""!=m&&m<=0?($("#bedroom_error").text(I18n.t("js.post.error.bedroom.not_a_number")),P=!1):m.length>3?($("#bedroom_error").text(I18n.t("js.post.error.bedroom.max_value")),P=!1):$("#bedroom_error").text(""),!u.match(j)&&""!=u||""!=u&&u<=0?($("#toilet_error").text(I18n.t("js.post.error.toilet.not_a_number")),P=!1):u.length>3?($("#toilet_error").text(I18n.t("js.post.error.toilet.max_value")),P=!1):$("#toilet_error").text(""),x.length>200?($("#furniture_error").text(I18n.t("js.post.error.furniture_description.too_long")),P=!1):$("#furniture_error").text(""),g.length>200?($("#contact_name_error").text(I18n.t("js.post.error.contact_name.too_long")),P=!1):$("#contact_name_error").text(""),f.length>200?($("#contact_address_error").text(I18n.t("js.post.error.contact_address.too_long")),P=!1):$("#contact_address_error").text(""),h.match(w)||""==h?$("#contact_phone_error").text(""):($("#contact_phone_error").text(I18n.t("js.post.error.contact_phone.invalid")),P=!1),""==v?($("#contact_mobile_error").text(I18n.t("js.post.error.contact_mobile.blank")),P=!1):v.match(w)?$("#contact_mobile_error").text(""):($("#contact_mobile_error").text(I18n.t("js.post.error.contact_mobile.invalid")),P=!1),b.match(y)||""==b?b.length>100?($("#contact_mail_error").text(I18n.t("js.post.error.contact_mail.too_long")),P=!1):$("#contact_mail_error").text(""):($("#contact_mail_error").text(I18n.t("js.post.error.contact_mail.invalid")),P=!1),P||$("#notice_error").text(I18n.t("js.post.error.error_total")).css({color:"red"}),P}),$(function t(){$("#totalPrice").text(I18n.t("agreement")).css({color:"red"}),checkPrice(),$("#post_price").focusout(function(){checkPrice()}),$("#post_area").focusout(function(){checkPrice()}),$("#post_unit").change(function(){checkPrice()})}),$(function t(){$("#cate_id").change(function(){getCategoriesList()}),$("#city_details").change(function(){getCitiesList()}),$("#district_details").change(function(){getDistrictsList()}),$("#ward_details").change(function(){getWardsList()}),$("#street_details").change(function(){getStreetsList()})})});var str_addr=[3];function getCitiesList(){var t=$("#city_details").val();$("#district_details").html("<option>--Quận Huyện--</option>"),t>0?(str_addr[3]=$("#city_details :selected").text(),$("#post_address_number").val(str_addr[3]),$("#post_address_number").trigger("input"),$.post("/getdata.json",{city_id:t},function(t,e){var r;t[1].forEach(function(t){$("#district_details").append("<option value="+t.id+">"+t.name+"</option>")})})):($("select#district_details").prop("selectedIndex",0),$("#district_details").html("<option>--Quận Huyện--</option>"),$("select#ward_details").prop("selectedIndex",0),$("#ward_details").html("<option>-- Phường/Xã  --</option>"),$("select#street_details").prop("selectedIndex",0),$("#street_details").html("<option>-- Đường Phố --</option>"),$("#post_address_number").val(""))}function getDistrictsList(){var t=$("#district_details").val();$("#ward_details").html("<option>-- Phường/Xã  --</option>"),t>0?(str_addr[3]=$("#city_details :selected").text(),str_addr[2]=$("#district_details :selected").text(),$("#post_address_number").val(str_addr[2]+", "+str_addr[3]),$("#post_address_number").trigger("input"),$.post("/getdata.json",{district_id:t},function(t,e){t.forEach(function(t){$("#ward_details").append("<option value="+t.id+">"+t.name+"</option>")})})):($("select#ward_details").prop("selectedIndex",0),$("#ward_details").html("<option>-- Phường/Xã  --</option>"),$("select#street_details").prop("selectedIndex",0),$("#street_details").html("<option>-- Đường Phố --</option>"),$("#post_address_number").val(""))}function getWardsList(){var t=$("#ward_details").val();$("#street_details").html("<option>-- Đường Phố --</option>"),t>0?(str_addr[3]=$("#city_details :selected").text(),str_addr[2]=$("#district_details :selected").text(),str_addr[1]=$("#ward_details :selected").text(),$("#post_address_number").val(str_addr[1]+", "+str_addr[2]+", "+str_addr[3]),$("#post_address_number").trigger("input"),$.post("/getdata.json",{ward_id:t},function(t,e){t.forEach(function(t){$("#street_details").append("<option value="+t.id+">"+t.name+"</option>")})})):($("select#street_details").prop("selectedIndex",0),$("#street_details").html("<option>-- Đường Phố --</option>"),$("#post_address_number").val(""))}function getStreetsList(){var t;$("#street_details").val()>0?(str_addr[3]=$("#city_details :selected").text(),str_addr[2]=$("#district_details :selected").text(),str_addr[1]=$("#ward_details :selected").text(),str_addr[0]=$("#street_details :selected").text(),$("#post_address_number").val(str_addr[0]+", "+str_addr[1]+", "+str_addr[2]+", "+str_addr[3]),$("#post_address_number").trigger("input")):$("#post_address_number").val("")}var new_image_feild='<div class="file_field"><button class="btn btn-info btn-image"><i class="fa fa-plus-circle fa-3x"></i><br>Add Image</button><input name="images[url][]" class="image-input" onchange="preview_image(event)" type="file" id="post_images_attributes_0_url"><div class="image-output"><div class="btn btn-danger image-remove" onclick="remove_image(event)"><i class="fa fa-trash"></i></div></div></div>',delete_image_feild='<input type="hidden" value="7" name="image_delete[][id]"">',is_max_image_num=!1;function append_new_image_input(){$("#file_field_container").children(".file_field").length<8?$("#file_field_container").append(new_image_feild):is_max_image_num=!0}function preview_image(t){var e=new FileReader;e.onload=function(){var r=$(t.target).next();r.css("backgroundImage","url("+e.result+")"),r.css("display","block"),append_new_image_input()},e.readAsDataURL(t.target.files[0])}function remove_image(t){var e;$(t.target).parents(".file_field").remove(),is_max_image_num&&(append_new_image_input(),is_max_image_num=!1)}function remove_image(t,e){var r=$(t.target).parents(".file_field");$("#file_field_container").append('<input type="hidden" value='+e+' name="images_delete[][id]"">'),r.remove(),is_max_image_num&&(append_new_image_input(),is_max_image_num=!1)}